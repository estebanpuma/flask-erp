<div x-show="step===1" class="mt-3" x-cloak>
    <div class="card border-0 shadow-sm">
      <div class="card-body">
        <div class="d-flex align-items-center justify-content-between mb-2">
          <h2 class="h5 mb-0">1. Define tus operaciones</h2>
          <button class="btn btn-sm btn-dark" @click="addOpPreset()">Usar lista sugerida</button>
        </div>
        <p class="text-muted small">Ej.: Corte, Aparado, Montaje, Terminado. Empieza simple; podrás editar después.</p>

        <form @submit.prevent="addOperation" class="row g-2">
          <div class="col-6 col-md-3">
            <label class="form-label">Nombre</label>
            <input type="text" class="form-control" x-model.trim="opForm.name" placeholder="Corte" required>
          </div>
          <div class="col-6 col-md-3">
            <label class="form-label">Código (opcional)</label>
            <input type="text" class="form-control" x-model.trim="opForm.code" placeholder="C01">
          </div>
          <div class="col-12 col-md-6">
            <label class="form-label">Descripción (opcional)</label>
            <input type="text" class="form-control" x-model.trim="opForm.description" placeholder="Se cortan piezas con troquel">
          </div>
          <div class="col-12 d-flex gap-2">
            <button class="btn btn-dark" type="submit">
              <i class="bi bi-plus-circle me-1"></i>Agregar operación
            </button>
            <button type="button" class="btn btn-outline-secondary" @click="resetOpForm()">Limpiar</button>
          </div>
        </form>

        <hr>
        <div class="table-responsive">
          <table class="table align-middle">
            <thead>
              <tr>
                <th>#</th>
                <th>Nombre</th>
                <th>Código</th>
                <th>Descripción</th>
                <th class="text-end">Acciones</th>
              </tr>
            </thead>
            <tbody>
              <template x-if="operations.length===0">
                <tr><td colspan="5" class="text-center text-muted">Sin operaciones aún</td></tr>
              </template>
              <template x-for="(op, i) in operations" :key="op.uid">
                <tr>
                  <td x-text="i+1"></td>
                  <td><input class="form-control form-control-sm" x-model="op.name"></td>
                  <td><input class="form-control form-control-sm" x-model="op.code"></td>
                  <td><input class="form-control form-control-sm" x-model="op.description"></td>
                  <td class="text-end">
                    <button class="btn btn-sm btn-outline-danger" @click="removeOperation(i)"><i class="bi bi-trash3"></i></button>
                  </td>
                </tr>
              </template>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <div class="d-flex justify-content-between mt-3">
      <button class="btn btn-outline-dark" @click="back()">Atrás</button>
      <button class="btn btn-dark" @click="next()">Siguiente</button>
    </div>
  </div>
