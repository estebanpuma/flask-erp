<div x-show="step===2" class="mt-3" x-cloak>
    <div class="card border-0 shadow-sm">
      <div class="card-body">
        <h2 class="h5">2. Agrega tus recursos disponibles</h2>
        <p class="text-muted small">Máquinas, herramientas, personal u hormas. Defaults: 480 min/turno, 100% eficiencia.</p>

        <form @submit.prevent="addResource" class="row g-2">
          <div class="col-12 col-md-3">
            <label class="form-label">Nombre</label>
            <input type="text" class="form-control" x-model.trim="resForm.name" placeholder="Máquina coser 241" required>
          </div>
          <div class="col-6 col-md-2">
            <label class="form-label">Tipo</label>
            <select class="form-select" x-model="resForm.kind">
              <option value="labor">Labor</option>
              <option value="machine">Machine</option>
              <option value="tool">Tool</option>
              <option value="last">Last/Horma</option>
            </select>
          </div>
          <div class="col-6 col-md-2">
            <label class="form-label">Cantidad</label>
            <input type="number" min="0" class="form-control" x-model.number="resForm.qty" placeholder="2">
          </div>
          <div class="col-6 col-md-2">
            <label class="form-label">Min/turno</label>
            <input type="number" min="0" class="form-control" x-model.number="resForm.shift_min" placeholder="480">
          </div>
          <div class="col-6 col-md-2">
            <label class="form-label">Eficiencia</label>
            <input type="number" step="0.01" min="0" max="1" class="form-control" x-model.number="resForm.efficiency" placeholder="1.0">
          </div>
          <div class="col-12 col-md-1 d-flex align-items-end">
            <button class="btn btn-dark w-100" type="submit"><i class="bi bi-plus-circle me-1"></i>Agregar</button>
          </div>
        </form>

        <hr>
        <div class="table-responsive">
          <table class="table align-middle">
            <thead>
              <tr>
                <th>#</th>
                <th>Nombre</th>
                <th>Tipo</th>
                <th>Cantidad</th>
                <th>Min/turno</th>
                <th>Efic.</th>
                <th class="text-end">Acciones</th>
              </tr>
            </thead>
            <tbody>
              <template x-if="resources.length===0">
                <tr><td colspan="7" class="text-center text-muted">Sin recursos aún</td></tr>
              </template>
              <template x-for="(r, i) in resources" :key="r.uid">
                <tr>
                  <td x-text="i+1"></td>
                  <td><input class="form-control form-control-sm" x-model="r.name"></td>
                  <td>
                    <select class="form-select form-select-sm" x-model="r.kind">
                      <option value="labor">labor</option>
                      <option value="machine">machine</option>
                      <option value="tool">tool</option>
                      <option value="last">last</option>
                    </select>
                  </td>
                  <td><input type="number" class="form-control form-control-sm" x-model.number="r.qty"></td>
                  <td><input type="number" class="form-control form-control-sm" x-model.number="r.shift_min"></td>
                  <td><input type="number" step="0.01" min="0" max="1" class="form-control form-control-sm" x-model.number="r.efficiency"></td>
                  <td class="text-end">
                    <button class="btn btn-sm btn-outline-danger" @click="removeResource(i)"><i class="bi bi-trash3"></i></button>
                  </td>
                </tr>
              </template>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <div class="d-flex justify-content-between mt-3">
      <button class="btn btn-outline-dark" @click="back()">Atrás</button>
      <button class="btn btn-dark" @click="next()">Siguiente</button>
    </div>
  </div>
