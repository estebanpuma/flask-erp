{% extends 'base.html' %}
{% from 'components/entryCard.html' import entry_card %}
{% from 'components/_pageHeader.html' import pageHeader %}

{% block title %}Producci√≥n{% endblock %}

{% block head %}
<style>
  .entry-card { transition: box-shadow .18s ease, transform .18s ease; }
  .entry-card:focus, .entry-card:focus-visible {
    outline: 3px solid rgba(25,135,84,.45);
    outline-offset: 2px;
  }
  .entry-card:hover { box-shadow: 0 .5rem 1rem rgba(0,0,0,.10); transform: translateY(-1px); }
  .entry-card .chev { transition: transform .18s ease; }
  .entry-card:hover .chev { transform: translateX(2px); }

  .section-title { font-weight:700; font-size:1.05rem; letter-spacing:.2px; display:flex; align-items:center; gap:.5rem; margin:.75rem 0 .5rem; }
  .section-title .dot { width:.5rem; height:.5rem; border-radius:999px; }
  .dot-cat{ background:#6c757d; } .dot-exe{ background:#0d6efd; } .dot-ctl{ background:#198754; }
  .group { padding:.25rem 0 1rem; }

  /* Evita FOUC con Alpine */
  [x-cloak] { display:none !important; }
</style>
{% endblock %}

{% block content %}
  {{ pageHeader(href='/', title='Producci√≥n') }}

  {% set NAV_CATALOGOS = [
    {'href':'/products/index',        'title':'üëü Productos',                'desc':'Modelos, dise√±os, colecciones.'},
    {'href':'/production/work_stations', 'title':'üè≠ Estaciones de trabajo',     'desc':'Cat√°logo de estaciones de trabajo.'},
    {'href':'/production/operations', 'title':'üè≠ Operaciones y Rutas',     'desc':'Cat√°logo de operaciones y definici√≥n de routing.'},
    {'href':'/production/resources',  'title':'‚öôÔ∏è Recursos',                 'desc':'M√°quinas, puestos y personal. Disponibilidad y turnos.'}
  ] %}
  {% set NAV_EJECUCION = [
    {'href':'/production/planning',   'title':'üóìÔ∏è Planificaci√≥n Semanal',   'desc':'Generar y ajustar plan por d√≠as/turnos con capacidad.'},
    {'href':'/production-orders',     'title':'üìü √ìrdenes de Producci√≥n',    'desc':'Ejecuci√≥n y seguimiento por etapas.'}
  ] %}
  {% set NAV_CONTROL = [
    {'href':'/production/dashboard',  'title':'üìä KPIs de Producci√≥n',       'desc':'Capacidad, CT, cuello de botella, LT, OTD.'}
  ] %}

  <!-- üîß Coloca TODO dentro del mismo scope Alpine -->
  <section x-data="{ q: '' }" x-cloak>

    <!-- CATALOGOS -->
    <div class="group mt-3">
      <div class="section-title mb-1">
        <span class="dot dot-cat" aria-hidden="true"></span>
        <h4>Cat√°logos</h4> <span class="text-muted small">Definir primero</span>

      </div>
      <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-3 h-100">
        {% for i in NAV_CATALOGOS %}
          <div x-show="('{{ i.title }} {{ i.desc }}'.toLowerCase().includes((q||'').toLowerCase()))">
            {{ entry_card(i.href, i.title, i.desc) }}
          </div>
        {% endfor %}
      </div>
    </div>

    <!-- EJECUCION -->
    <div class="group mt-3">
      <div class="section-title">
        <span class="dot dot-exe" aria-hidden="true"></span>
        <h4>Ejecuci√≥n</h4>
        <span class="text-muted small">Planificar y operar</span>
      </div>
      <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-3">
        {% for i in NAV_EJECUCION %}
          <div x-show="('{{ i.title }} {{ i.desc }}'.toLowerCase().includes((q||'').toLowerCase()))">
            {{ entry_card(i.href, i.title, i.desc) }}
          </div>
        {% endfor %}
      </div>
    </div>

    <!-- CONTROL -->
    <div class="group mt-3">
      <div class="section-title mb-1">
        <span class="dot dot-ctl" aria-hidden="true"></span>

          <h4>Control</h4>
          <p class="text-muted small">Indicadores y seguimiento</p>

      </div>
      <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-3">
        {% for i in NAV_CONTROL %}
          <div x-show="('{{ i.title }} {{ i.desc }}'.toLowerCase().includes((q||'').toLowerCase()))">
            {{ entry_card(i.href, i.title, i.desc) }}
          </div>
        {% endfor %}
      </div>
    </div>
  </section>
{% endblock %}
